<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>encrypt-decode</title>
	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<nav class="navbar navbar-default" role="navigation">
	<div class="container-fluid">
	<div class="navbar-header">
		<a class="navbar-brand" href="#">加密解密算法</a>
	</div>
	<div>
		<ul class="nav navbar-nav">
			<li class="active"><a href="#">凯撒密码</a>
            </li>
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					单字母替换加密算法
					<b class="caret"></b>
				</a>
				<ul class="dropdown-menu">
					<li><a href="#">字母倒排序</a></li>
                    <li class="divider"></li>
					<li><a href="#">单表置换密码</a>
				</ul>
            </li>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					多字母替换加密方法
					<b class="caret"></b>
				</a>
				<ul class="dropdown-menu">
					<li><a href="#">维吉利亚密码</a>
				</ul>
            </li>
			</li>
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					转换加密方法
					<b class="caret"></b>
				</a>
				<ul class="dropdown-menu">
					<li><a href="#">转换加密方法(1)</a></li>
                    <li class="divider"></li>
					<li><a href="#">转换加密方法(2)</a>
				</ul>
            </li>
		</ul>
        </div>
	</div>
	</div>
</nav>
<div id=""main-body" class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
<h1 class="page-header">凯撒密码加密/解密</h1>
<!--Start!-->
<div class="row margintb-6">
    <div class="col-xs-12 col-sm-12">
        <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">处理文本：</span>
            <textarea name="plaintext" id="plaintext" class="form-control" rows="6" placeholder="这里输入明文"></textarea>
        </div>
    </div>
</div>
<div class="row margintb-6">
    <div class="col-xs-12 col-sm-12">
        <div class="input-group">
            <span class="input-group-addon" id="sizing-addon3">偏移量</span>
            <input id="key" type="number" class="form-control" value="3" aria-describedby="basic-addon3">
        </div>
    </div>
    <div class="row margintb-6">
        <div class="col-xs-6 col-sm-2 col-sm-offset-4">
            <button id="encode" type="button" class="btn btn-primary width-100-percent" onclick="caesarCipher(true);">加密</button>
        </div>
        <div class="col-xs-6 col-sm-2">
            <button id="decode" type="button" class="btn btn-primary width-100-percent" onclick="caesarCipher(false);">解密</button>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12">
        <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">输出文本：</span>
            <textarea name="ciphertext" id="ciphertext" onclick="this.focus();this.select();" class="form-control" rows="6" placeholder="密文"></textarea>
        </div>
    </div>
</div>
</body>
<script>
    function caesarCipher(encrypt) {
        var shift = parseInt(document.getElementById('key').value);
        console.log(shift);
        if (!encrypt) { shift = -shift; } // 如果是解密，偏移量需要取反

        var input = document.getElementById('plaintext').value;
        var output = '';

        for (var i = 0; i < input.length; i++) {
            var ascii = input.charCodeAt(i);

            if (ascii === 32) {
                // 如果字符是空格，保持不变
                output += input.charAt(i);
            } else if (ascii >= 65 && ascii <= 90) {
                // 处理大写字母
                output += String.fromCharCode((ascii - 65 + shift + 26) % 26 + 65);
            } else if (ascii >= 97 && ascii <= 122) {
                // 处理小写字母
                output += String.fromCharCode((ascii - 97 + shift + 26) % 26 + 97);
            } else {
                // 其他字符保持不变
                output += input.charAt(i);
            }
        }
        console.log(output);
        document.getElementById('ciphertext').innerText = ''+ output;
}
</script>
</html>